Question 01 - SQLite connectivity and DAO (25 marks):
=================================

Setup:
--------

For this task you will need to make sure that you have setup the NodeJS project as normal with `npm install`. 

You will need to make sure that the `candidate-database.db` database is created. The empty database should be created when you run `node app.js` or alternatively you can create it in your database browser. You have also been given an `CANDIDATE_DATA.sql` file within the `question01\sql` directory which contains the table and data required for this activity. You will need to run this script in your database within the database browser to create the tables and data for your database. You should familiarise yourself with this file and the columns that are in the table generated by the `candidate-database.db` file.

You have been provided with the directories and base files in which to write your code. When you run the project and browse to `http://localhost:3000/`, you should be directed to the `home.handlebars` page when requesting the root ( `/` ) of the project and see the text `testing home...` in the web browser. This will let you know that the project is running correctly.

You should also familiarise yourself with the project structure. 

General Task Description:
---------------------

For this task, you will create 3 HTML forms with 3 associated DAO methods, route handlers and Handlebars files that will allow the user to generate a request to retrieve data from the candidates database and view it in a handlebars page. 

It is strongly suggested that you complete each form and associated set of functional requirements individually and in order. For example, create the HTML form, DAO function, route handler and Handlebars file for the first set of requirements and test each step before moving onto the next set of functional requirements.

The 3 separate forms that generate the requests to load the data will be created in the `home.handlebars` file. These forms should each generate a request to a different route handler which will each have an associated Handlebars file. 

You will create the route handlers and Handlebars files for each form. Each route handler will use an associated DAO method you create to load the correct data and set the locals properties of the response object ( `res.locals` ) so that the data can be rendered in the handlebars files you create.

You may choose how you structure the HTML for each of the forms and how you display the data in the handlebars files; just make sure you meet the functional requirements. You will not be marked on the quality of your HTML, only that it meets functional requirements. You do not need to write any CSS.

Functional Requirements:
-----------------------------

##### First form, request, DAO function & handlebars (7 marks):

- A user should be able to input the name of a skill in an html form (the form should be created within the `home.handlebars` file) and this should generate a request that will retrieve all users with that skill from the database then use a handlebars file you create to render the results in a table
- This set of requirements will require its own form (within the `home.handlebars` file), route handler ( e.g. `app.get(/candidate...)`) , DAO function and handlebars file; you can choose the details of how you do things like structuring your forms, route handler paths, DAO function and handlebars file etc
- For each candidate matching the values input in the form and displayed in Handlebars, you should show the information from all 7 columns in the database

##### Second form, request, DAO function & handlebars (9 marks):

- A user should be able to input a range of years of experience by inputting minimum years experience and maximum years experience (the form should be created within the `home.handlebars` file) and this should generate a request that will retrieve all candidates within that range; then use a handlebars file you create to render the results in a table
- This set of requirements will require its own form (within the `home.handlebars` file), route handler ( e.g. `app.get(/candidate...)`) , DAO function and handlebars file; you can choose the details of how you do things like structuring your forms, route handler paths, DAO function and handlebars file etc
- For each candidate matching the values input in the form and displayed in Handlebars, you should show the information from all 7 columns in the database

##### Third form, request, DAO function & handlebars (9 marks):

- A user should be able to select from distinct countries in the database and input minimum years experience from the form in `home.handlebars` and this should generate a request that will retrieve candidates matching those criteria; then use a handlebars file you create to render the results in a table
- The third form is a bit different as it will involve modifying the initial route handle function that renders the home page (`router.get("/",...`) to have data from the database as options that can be selected within the HTML form within `home.handlebars`. It will also require you to write more than one DAO function as you will require one function to get the distinct countries from the database for the options in the form and another function to get the data requested by the form.
- Within the third form you create in `home.handlebars`, a user should be able to select from a dropdown `select` and `option` elements of all of the distinct countries in the countries column of the database. Each country should only appear as an option once. The user should also be required to select minimum years experience so that the form allows them to request data based on country and minimum years experience
- Â In order to have all of the distinct countries appear only once in the HTML form options, you should use a `dao` function with an appropriate SQL query that you create to get an array with all of the distinct countries from database within the route handler function that renders the `home.handlebars` form
  - You should use all nessary steps in the route handler function and Handlebars file to make the dropdown select options in the form contain all of the distinct countries from the database; make sure to make use of appropriate Handlebars helpers
- When the user submits the form, this should generate a request that will retrieve all users from the selected country with the minimum years experience; then it should be rendered in a handlebars file you create to render the results in a table; you should create any new route handler functions, `dao` functions and Handlebars files required for requesting the data and rendering the result
- For each candidate matching the values input in the form and displayed in Handlebars, you should show the information from all 7 columns in the database

Suggested steps for each of the three sets of functional requirements:
-----------------------

Note: if you are confident you understand how to create the functional requirements you do not need to read these suggested steps in detail; they are just here as a guide.

- Within `home.handlebars`, create an appropriate HTML form that will allow a user to request the data specified in the functional requirements; it should generate a get request to an appropriately named router path through using the method and action attributes of the form correctly. Your html form will need the correct number and type of input elements to match the functional requirements of the task; you may choose the specifics of the form structure. You should use the `GET` method for all requests for these requirements. For the third form, there are some extra steps required to generate some of the options that will appear in the form in `home.handlebars` so read the instructions for the third form carefully.

- Create a route handler that can handle the request from the client that is generated from the form, it should use the same path and method that was created in your form

- Create a DAO function that will be able to use the parameters in the request to create a query to the database that will return the data specified in the functional requirements

- In your route handler, call the associated DAO method and set the appropriate locals properties of the response object ( `res.locals...` )

- Create a handlebars file that can render the data necessary and make sure to use this handlebars file to render your response

- Test that you can input the required form inputs and view the correct data based on what you have input

- For convenience of testing, add a link back to the home page in the handlebars file by adding an anchor tag with the `href` attribute set to `./`

Question 02 - ER diagrams, relational schemas and SQL (25 marks):
===========================================

In this task you will create an ER diagram, relational schema and sql tables for an animal adoption database that meets the requirements listed below.

The database will contain information about animals that are available for adoption. Animals have a name, species and city. 

It will contain information about the rescue organisations the animals belong to; each animal must only belong to one rescue organisation, but one rescue organisation can have many animals. Rescue organisations have a name, description and city.

It will also contain information about users who are looking to adopt animals. Users will have a first name, last name and city. 

Users can follow many animals that they are interested in and animals can be followed by many users. 

The database will also contain information about upcoming events; events have a name, description and city. An event needs to be managed by one rescue organisation but one rescue organisation can manage many events. 

Users can register interest in many events and events could have many users registered as interested.

Remember that you should also use unique ids/primary keys where appropriate, use foreign keys to create the relationships between tables and split up compound attributes. You must design the structure of primary and foreign keys in a way that creates the relationships in the database correctly. Think carefully about the one-to-many and many-to-many relationships and how this affects how you structure the foreign key relationships in your database and when you may need to create a new table to structure a relationship between entities.

Ensure you create all primary and foreign keys required to structure the relationships between all of the tables.

Step 1 (9 marks):
-----------

On paper or using a drawing program of your choice, draw an ER diagram that captures these relationships. Ensure that you have clearly marked up your diagram with entities, relationships, cardinalities, attributes and keys.

It is OK if you combine some compound attributes in your ER diagram and it is ok to leave out primary keys like ids.

For your cardinalities, the most important thing is that `one to one`, `one to many` and `many to many` relationships are represented between tables.

If a drawing or diagram creation program was used, export an image or PDF of your ER diagram and include it in the Question 02 directory for submission. If it is drawn on paper, please write your name clearly on the paper and hand it in at the end of the test. 

Step 2 (7 marks):
--------------

From your ER Diagram, generate a complete Relational Model (Relational schema); you can do this on paper or with a word processing program of your choice or include it in the same file/image as your ER diagram. If you use a digital file, include it into the Question 02 folder for submission. Apply normalization to your Relational Model, ensuring that compound attributes are broken up if appropriate; note: there may not be any compound attributes.

You should make it clear which attributes in your relational model are primary keys and foreign keys. It is suggested you do this with the following conventions:

- underline primary keys
- asterix ( `*` ) for foreign keys

e.g.: a table named lecturers with the columns `id`, `name`, `dob`, `mentor_id` in which id is the primary key and mentor_id is a foreign key would look like this:

- lecturers(<u>id</u>, name, dob, *mentor_id)

You may create your relational schema in a text file, as text included with your ER diagram or write it out on paper and include it with your ER diagram.

Step 3 (9 marks):
----------

Finally, convert your Relational Model into SQLite compatible SQL, writing the DDL with appropriate data types in the provided `question2.sql` file. You should include all necessary DDL so that someone running the script can drop the tables, recreate the database and insert some test data into each table. 

The relationships between the tables should be created through use of primary and foreign keys. Create some sample data to insert into the tables, including it in the same file as your SQL DDL. Your sample data should include at least 3 rows for each table and allow you to test that all relationships between tables function as intended. 

Ensure that your SQL runs successfully in the database browser and that all tables can be created and data inserted when you execute the whole script; this also means that you should include the necessary `drop table` statements at the start of the script so that your script can be re-run if needed. 

Make sure that your tables are created, data inserted and tables dropped in the correct order so that your whole script can be run without errors.

Adding files for submission:
---------------

Check that all files for this question are within the `question02` directory  for submission. If any diagrams are created on paper, please put your name and upi clearly on the paper and hand it to your lecturer.
